# 更新日志

## v1.1.2 (2025-09-28)

### 🔧 Bug 修复和安全性增强

- **修复 GitHub Actions 路径错误**：修正 CI 测试脚本路径配置
- **修复变量拼写错误**：修正测试文件中的变量名拼写问题
- **增强安全性**：修复临时目录创建安全性漏洞，添加用户名标识符
- **改进函数调用**：增强 nvm_dir 函数调用的健壮性，添加多重 fallback 机制
- **国际化支持**：将所有中文注释和消息翻译为英文，提升国际化支持
- **Fish 语法优化**：修复语法错误，移除不适用的 then 关键字
- **引号转义修复**：修正测试文件中的引号转义问题
- **代码质量提升**：修复工具模块中的变量作用域和安全问题

### 🧪 测试和 CI/CD

- **完善测试套件**：增加配置和性能测试覆盖
- **CI/CD 流程优化**：改进 GitHub Actions 工作流配置
- **自动化测试**：增强自动化测试验证流程

## v1.1.0 (2025-09-25)

### 🎉 新功能

- **智能化 .nvmrc 文件管理**：执行 `nvm use` 时自动创建或管理 .nvmrc 文件
- **交互式用户界面**：提供友好的选项来处理 .nvmrc 文件冲突
- **自动备份功能**：覆盖现有 .nvmrc 文件时自动创建时间戳备份
- **版本验证优化**：支持预发布版本和构建元数据的完整版本格式
- **错误处理改进**：更准确的错误信息和更好的用户体验

### 🔧 代码优化

- **性能提升**：使用 `string trim <` 替代 `cat | string trim` 减少进程创建
- **代码重构**：提取公共逻辑为辅助函数，消除重复代码
- **现代 Fish 语法**：使用 `-or` 操作符替代 `-o`，提高可读性
- **逻辑简化**：优化条件判断结构，提高代码清晰度

### 🐛 Bug 修复

- **修复 .nvmrc 自动切换功能**：解决 load_nvm 启动优化逻辑错误
- **状态检查改进**：确保 nvm 命令成功后才继续后续操作

## v1.0.0-2 (2025-09-25)

### 🔧 Bug 修复

- **修复 .nvmrc 自动切换功能**：解决 load_nvm 启动优化逻辑错误
- **优化启动性能**：确保 Fish 启动时只设置标志并快速返回
- **改进版本对比**：避免不必要的 nvm 调用，提高响应速度

## v1.0.0 (2025-08-14)

### 🎉 初始版本

- 为 Fish shell 提供完整的 nvm 集成支持
- 支持所有 nvm 命令和功能
- 自动版本切换（.nvmrc 文件支持）

### 🔧 智能 Bass 管理

- **自动检测现有安装**：检查用户是否已安装 bass
- **插件管理器支持**：自动使用 fisher、Oh My Fish、fundle 安装 bass
- **本地回退方案**：无插件管理器时从 GitHub 下载源码本地配置
- **环境保护**：不破坏用户现有的 Fish 配置

### ✨ 零配置体验

- **首次使用自动配置**：运行 `nvm --version` 即自动完成所有设置
- **无需手动脚本**：移除了手动配置脚本，实现真正的即开即用
- **智能检测**：自动检测并配置 Fish shell 集成
- **一键启用**：自动启用 .nvmrc 文件支持

### 📦 包特性

- 依赖官方 nvm 包（Arch Linux extra 仓库）
- 智能 bass 依赖管理，无需用户手动安装
- 零配置安装体验
- 详细的中文文档

### 🗂️ 文件组成

- `nvm.fish` - 主要 nvm 命令包装器（含自动配置）
- `nvm_find_nvmrc.fish` - .nvmrc 文件查找
- `load_nvm.fish` - 自动版本切换
- `bass_helper.fish` - 智能 bass 环境管理和自动配置

### 🚀 用户体验

1. 安装包：`yay -S nvm-fish`
2. 使用nvm：`nvm --version`（自动完成所有配置）
3. 享受功能：支持所有 nvm 命令和 .nvmrc 自动切换